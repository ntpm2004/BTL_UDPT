<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <h2 class="text-center mb-4"> Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>

        <!-- Th√™m s·∫£n ph·∫©m m·ªõi -->
        <form method="POST" action="{{ url_for('products.add_product') }}" class="card p-4 mb-4">
            <h5>‚ûï Th√™m s·∫£n ph·∫©m m·ªõi</h5>
            <input class="form-control mb-2" type="text" name="id" placeholder="M√£ s·∫£n ph·∫©m" required>
            <input class="form-control mb-2" type="text" name="name" placeholder="T√™n s·∫£n ph·∫©m" required>
            <input class="form-control mb-2" type="number" name="price" placeholder="Gi√°" required>
            <input class="form-control mb-3" type="number" name="quantity" placeholder="S·ªë l∆∞·ª£ng" required>
            <button class="btn btn-custom w-100">Th√™m s·∫£n ph·∫©m</button>
        </form>

        <!-- Ch·ª©c nƒÉng h√†ng lo·∫°t -->

        <form method="POST" action="{{ url_for('products.discount_all') }}" class="mb-4 d-flex gap-2">
            <input class="form-control w-25" type="number" name="discount" placeholder="Gi·∫£m gi√° (-)" value="1000"
                required>
            <button class="btn btn-danger">Gi·∫£m gi√° h√†ng lo·∫°t</button>
        </form>

        <form method="POST" action="{{ url_for('products.increase_all') }}" class="mb-4 d-flex gap-2">
            <input class="form-control w-25" type="number" name="increase" placeholder="TƒÉng gi√° (+)" value="1000"
                required>
            <button class="btn btn-success">TƒÉng gi√° h√†ng lo·∫°t</button>
        </form>

        <!-- Danh s√°ch s·∫£n ph·∫©m -->
        <h4> Danh s√°ch s·∫£n ph·∫©m</h4>
        <table class="table table-striped">
            <tr>
                <th>M√£</th>
                <th>T√™n</th>
                <th>Gi√°</th>
                <th>S·ªë l∆∞·ª£ng</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            {% for pid, data in products.items() %}
            <tr>
                <td>{{ pid }}</td>
                <td>{{ data.name }}</td>
                <td>{{ data.price }}‚Ç´</td>
                <td>{{ data.quantity }}</td>
                <td>
                    <!-- üìù N√∫t s·ª≠a -->
                    <button class="btn btn-warning btn-sm" data-bs-toggle="modal"
                        data-bs-target="#editModal{{ pid }}">S·ª≠a</button>
                    <!-- üóë N√∫t x√≥a -->
                    <a href="{{ url_for('products.delete_product', pid=pid) }}" class="btn btn-danger btn-sm"
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√¥ng?')">X√≥a</a>
                </td>
            </tr>

            <!-- Modal s·ª≠a s·∫£n ph·∫©m -->
            <div class="modal fade" id="editModal{{ pid }}" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form method="POST" action="{{ url_for('products.update_product', pid=pid) }}">
                            <div class="modal-header">
                                <h5 class="modal-title"> S·ª≠a s·∫£n ph·∫©m {{ pid }}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <input class="form-control mb-2" type="text" name="name" value="{{ data.name }}"
                                    required>
                                <input class="form-control mb-2" type="number" name="price" value="{{ data.price }}"
                                    required>
                                <input class="form-control mb-2" type="number" name="quantity"
                                    value="{{ data.quantity }}" required>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-success">L∆∞u</button>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </table>

        <div class="text-center mt-4">
            <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary w-25">üö™ ƒêƒÉng xu·∫•t</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>